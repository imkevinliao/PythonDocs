[
    {
        "bookSourceUrl": "https://sk.hbooker.com",
        "bookSourceType": "0",
        "bookSourceName": "ğŸ’° æ¬¢ä¹ä¹¦å®¢",
        "bookSourceGroup": "ğŸ’° æ­£ç‰ˆ",
        "bookSourceComment": "â—å¼€å§‹ä½¿ç”¨æ—¶(æœç´¢æˆ–è°ƒè¯•)ä¼šè‡ªåŠ¨æ¸¸å®¢ç™»é™†,è‹¥æœ‰è´¦å·è¯·å†è¾“å…¥è´¦å·ç™»é™†\nâ—æ³¨æ„é‡å¤ç™»å½•ç°åœ¨ä¼šè§¦å‘éªŒè¯ç æ£€æŸ¥, æœ‰å°å·çš„é£é™©\nâ—è‹¥è¦åˆ‡æ¢è´¦å·,è¯·åœ¨[ç™»é™†ç•Œé¢]èœå•ä¸­æ¸…é™¤è´¦å·å’Œå¯†ç è¿›è¡Œ[æ¸¸å®¢ç™»å½•],å†è¾“å…¥è´¦å·å’Œå¯†ç ç™»é™†\nâ—é‡å¤{ç‚¹å‡»âˆš}ç™»é™†ä¼šåœ¨ä¸€æ®µæ—¶é—´å†…æ— æ³•è´¦å·ç™»é™†(éœ€è¦ç­‰å‡ ä¸ªå°æ—¶);å¦‚æœéœ€è¦è¯·åˆ‡æ¢ç½‘ç»œ[wifi/æ•°æ®]é‡æ–°å°è¯•ç™»é™†,ç™»é™†æˆåŠŸåè¯·å‹¿é¢‘ç¹åˆ‡æ¢è´¦å·\nâ—è‹¥æŠ¥é”™è¯·åˆ é™¤ç™»é™†æŒ‰é’®é‡Œé¢çš„ç™»å½•å¤´(ç™»é™†ç•Œé¢å³ä¸Šè§’çš„é€‰é¡¹é‡Œ),å¹¶ä¸”æ¸…é™¤Cookieåé‡æ–°å†æ¬¡è¿›è¡Œç™»å½•\nâ—å› ä¸ºæ“ä½œè¿‡å¤šï¼Œè‹¥ç‚¹å‡»ç™»å½•âˆšæ— ååº”è¯·ç­‰å¾…ä¸€ä¼š\nâ—ç‰¹æ€§: ç™»é™†|æ¸¸å®¢ç™»å½•|ç­¾åˆ°|ä¹¦æ¶|å‘ç°é¡µ|è´­ä¹°ï¼ˆéœ€è¦å‡çº§åˆ°æœ€æ–°ç‰ˆæœ¬â‰¥3.22.081219ï¼‰",
        "loginUrl": "<js>\n// å·¥å…·ç±»\nvar key = java.base64DecodeToByteArray(\"lXsAUe1NZEw6tAxM9w1Tpq2tU4la2+PwM8evj2C+yB0=\")\nvar iv = java.base64DecodeToByteArray(\"AAAAAAAAAAAAAAAAAAAAAA==\")\nvar aes = Packages.cn.hutool.crypto.symmetric.AES(\"CBC\",\"PKCS5Padding\", key, iv)\nvar RandomUtil = Packages.cn.hutool.core.util.RandomUtil\n// å‚æ•°\nlet userInfo = source.getLoginInfoMap()\nlet username = userInfo['æ‰‹æœºå·ç /é‚®ç®±'].trim()\nlet password = userInfo['å¯†ç '].trim()\nlet app_version = \"2.9.290\"\nlet device_token = `shuke_${RandomUtil.randomNumbers(15)}`\nlet login_token = RandomUtil.randomString(32)\nlet account = `%E4%B9%A6%E5%AE%A2${RandomUtil.randomNumbers(12)}`\nlet uuid = `android${java.randomUUID()}`\nvar params = `app_version=${app_version}&device_token=${device_token}&login_token=${login_token}&account=${account}`\n// è´¦å·ç™»å½•\nfunction login(username, password){\n  var loginUrl = `https://sk.hbooker.com/signup/login?${params}&login_name=${username}&passwd=${password}`\n  var autoRegUrl = `https://sk.hbooker.com/signup/auto_reg?oauth_union_id=&app_version=${app_version}&gender=1&oauth_open_id=&device_token=${device_token}&channel=TX&oauth_type=&uuid=${uuid}`\n  // æ˜¯å¦æ¸¸å®¢\n  let isLogin = !source.getLoginHeader()\n  let isAuto = username == '' || password == ''\n  if(isAuto && !isLogin){ \n     throw new Error(\"è¯·å‹¿é‡å¤ç™»å½•,å¦‚è‹¥éœ€è¦è¯·æ¸…é™¤ç™»å½•å¤´å’ŒCookie\")\n  }\n  var url = isAuto ? autoRegUrl : loginUrl\n  // è·å–ç™»å½•ä¿¡æ¯\n  let res = JSON.parse(aes.decryptStr(java.ajax(url)))\n  if(res.tip) {\n    throw new Error(isAuto ? 'è‡ªåŠ¨ç™»é™†å¤±è´¥,è¯·è¾“å…¥è´¦å·æˆ–åˆ‡æ¢ç½‘ç»œé‡æ–°ç™»é™†' : 'è´¦å·ç™»é™†å¤±è´¥,è¯·å°è¯•åˆ‡æ¢ç½‘ç»œæˆ–è€…ç­‰å¾…å‡ å°æ—¶åé‡æ–°ç™»é™†')\n  }\n  let login_token = res.data.login_token\n  let user_code = res.data.user_code\n  let reader_name = res.data.reader_info.reader_name\n  let account = res.data.reader_info.account\n  let rest_hlb = res.data.prop_info.rest_hlb\n  java.toast(isAuto ? 'è‡ªåŠ¨ç™»é™†æˆåŠŸ,è‹¥æœ‰è´¦å·è¯·è¾“å…¥è´¦å·è¿›è¡Œç™»é™†' : `${reader_name}ã€å‰©ä½™æ¬¢ä¹å¸:${rest_hlb}ã€‘,ç™»å½•æˆåŠŸ!`)\n  // è·å–ä¹¦æ¶\n  let bookList = java.ajax(`https://sk.hbooker.com/bookshelf/get_shelf_list?app_version=${app_version}&device_token=${device_token}&login_token=${login_token}&account=${account}`)\n  let shelf_list = JSON.parse(aes.decryptStr(bookList)).data.shelf_list[0]\n  let shelf_id = shelf_list.shelf_id\n  let reader_id = shelf_list.reader_id\n  // ç™»å½•å®Œæˆ\n  let header = {\n    \"app_version\": String(app_version),\n    \"device_token\": String(device_token),\n    \"login_token\": String(login_token),\n    \"account\": encodeURIComponent(account),\n    \"user_code\": String(user_code),\n    \"shelf_id\": String(shelf_id),\n    \"reader_name\": encodeURIComponent(reader_name),\n    \"reader_id\": String(reader_id),\n    \"rest_hlb\": String(rest_hlb)\n  }\n  return JSON.stringify(header)\n}\n// å†™å…¥ç™»å½•å¤´\nheader = login(username,password)\nsource.putLoginHeader(header)\n</js>",
        "loginUi": "[\n  {\n    \"name\": \"æ‰‹æœºå·ç /é‚®ç®±\",\n    \"type\": \"text\"\n  },\n  {\n    \"name\": \"å¯†ç \",\n    \"type\": \"password\"\n  }\n]",
        "loginCheckJs": "",
        "concurrentRate": "",
        "header": "{\n  \"user-agent\":\"Android  com.kuangxiangciweimao.novel 2.9.290\"\n}",
        "bookUrlPattern": "",
        "searchUrl": "<js>\n(function(key,page){\nif(!source.getLoginHeaderMap()){\n  // è‡ªåŠ¨ç™»é™†\n  source.login()\n}\nlet headerMap = source.getLoginHeaderMap()\nlet app_version = headerMap['app_version']\nlet device_token = headerMap['device_token']\nlet login_token = headerMap['login_token']\nlet account = headerMap['account']\nreturn `/bookcity/get_filter_search_book_list?app_version=${app_version}&count=10&page=${page - 1}&use_daguan=1&device_token=${device_token}&login_token=${login_token}&category_index=0&key=${key}&account=${account}`\n})(key,page)\n</js>",
        "exploreUrl": "[\n{\"title\":\"ä¸ªäººä¸­å¿ƒ\",\"url\":\"\",\"style\": {\"layout_flexGrow\": 0,\"layout_flexBasisPercent\": 1}},\n{\"title\":\"æ¯æ—¥ç­¾åˆ°\",\"url\":\"/reader/get_task_bonus_with_sign_recommend?app_version={{source.getLoginHeaderMap()['app_version']}}&login_token={{source.getLoginHeaderMap()['login_token']}}&account={{source.getLoginHeaderMap()['account']}}&device_token={{source.getLoginHeaderMap()['device_token']}}&task_type=1\",\"style\": {\"layout_flexGrow\": 0.25,\"layout_flexBasisPercent\": -1}},\n{\"title\":\"æ¯æ—¥ä»»åŠ¡\",\"url\":\"/task/get_all_task_list?app_version={{source.getLoginHeaderMap()['app_version']}}&login_token={{source.getLoginHeaderMap()['login_token']}}&account={{source.getLoginHeaderMap()['account']}}&device_token={{source.getLoginHeaderMap()['device_token']}}&task_type=1\",\"style\": {\"layout_flexGrow\": 0.25,\"layout_flexBasisPercent\": -1}},\n{\"title\":\"ä¸ªäººä¹¦æ¶\",\"url\":\"/bookshelf/get_shelf_book_list_new?order=last_read_time&app_version={{source.getLoginHeaderMap()['app_version']}}&login_token={{source.getLoginHeaderMap()['login_token']}}&count=100&account={{source.getLoginHeaderMap()['account']}}&device_token={{source.getLoginHeaderMap()['device_token']}}&page=0&shelf_id={{source.getLoginHeaderMap()['shelf_id']}}\",\"style\": {\"layout_flexGrow\": 0.25,\"layout_flexBasisPercent\": -1}},\n{\"title\":\"å…¨éƒ¨åˆ†ç±»\",\"url\":\"/bookcity/get_filter_search_book_list\n?app_version={{source.getLoginHeaderMap()['app_version']}}&filter_word=&count=10&tags=%5B%7B%22filter%22%3A%221%22%2C%22tag%22%3A%22%22%7D%5D&use_daguan=0&device_token={{source.getLoginHeaderMap()['device_token']}}&is_paid=&login_token={{source.getLoginHeaderMap()['login_token']}}&page={{page-1}}&category_index=0&filter_uptime=&key=&account={{source.getLoginHeaderMap()['account']}}&up_status=&order=week_click\",\"style\": {\"layout_flexGrow\": 0,\"layout_flexBasisPercent\": 1}},\n{\"title\":\"ç„å¹»å¥‡å¹»\",\"url\":\"/bookcity/get_filter_search_book_list\n?app_version={{source.getLoginHeaderMap()['app_version']}}&filter_word=&count=10&tags=%5B%7B%22filter%22%3A%221%22%2C%22tag%22%3A%22%22%7D%5D&use_daguan=0&device_token={{source.getLoginHeaderMap()['device_token']}}&is_paid=&login_token={{source.getLoginHeaderMap()['login_token']}}&page={{page-1}}&category_index=8&filter_uptime=&key=&account={{source.getLoginHeaderMap()['account']}}&up_status=&order=week_click\",\"style\": {\"layout_flexGrow\": 0.25,\"layout_flexBasisPercent\": -1}},\n{\"title\":\"éƒ½å¸‚é’æ˜¥\",\"url\":\"/bookcity/get_filter_search_book_list\n?app_version={{source.getLoginHeaderMap()['app_version']}}&filter_word=&count=10&tags=%5B%7B%22filter%22%3A%221%22%2C%22tag%22%3A%22%22%7D%5D&use_daguan=0&device_token={{source.getLoginHeaderMap()['device_token']}}&is_paid=&login_token={{source.getLoginHeaderMap()['login_token']}}&page={{page-1}}&category_index=27&filter_uptime=&key=&account={{source.getLoginHeaderMap()['account']}}&up_status=&order=week_click\",\"style\": {\"layout_flexGrow\": 0.25,\"layout_flexBasisPercent\": -1}},\n{\"title\":\"çµå¼‚æœªçŸ¥\",\"url\":\"/bookcity/get_filter_search_book_list\n?app_version={{source.getLoginHeaderMap()['app_version']}}&filter_word=&count=10&tags=%5B%7B%22filter%22%3A%221%22%2C%22tag%22%3A%22%22%7D%5D&use_daguan=0&device_token={{source.getLoginHeaderMap()['device_token']}}&is_paid=&login_token={{source.getLoginHeaderMap()['login_token']}}&page={{page-1}}&category_index=1&filter_uptime=&key=&account={{source.getLoginHeaderMap()['account']}}&up_status=&order=week_click\",\"style\": {\"layout_flexGrow\": 0.25,\"layout_flexBasisPercent\": -1}},\n{\"title\":\"å†å²å†›äº‹\",\"url\":\"/bookcity/get_filter_search_book_list\n?app_version={{source.getLoginHeaderMap()['app_version']}}&filter_word=&count=10&tags=%5B%7B%22filter%22%3A%221%22%2C%22tag%22%3A%22%22%7D%5D&use_daguan=0&device_token={{source.getLoginHeaderMap()['device_token']}}&is_paid=&login_token={{source.getLoginHeaderMap()['login_token']}}&page={{page-1}}&category_index=30&filter_uptime=&key=&account={{source.getLoginHeaderMap()['account']}}&up_status=&order=week_click\",\"style\": {\"layout_flexGrow\": 0.25,\"layout_flexBasisPercent\": -1}},\n{\"title\":\"ç§‘å¹»æ— é™\",\"url\":\"/bookcity/get_filter_search_book_list\n?app_version={{source.getLoginHeaderMap()['app_version']}}&filter_word=&count=10&tags=%5B%7B%22filter%22%3A%221%22%2C%22tag%22%3A%22%22%7D%5D&use_daguan=0&device_token={{source.getLoginHeaderMap()['device_token']}}&is_paid=&login_token={{source.getLoginHeaderMap()['login_token']}}&page={{page-1}}&category_index=6&filter_uptime=&key=&account={{source.getLoginHeaderMap()['account']}}&up_status=&order=week_click\",\"style\": {\"layout_flexGrow\": 0.25,\"layout_flexBasisPercent\": -1}},\n{\"title\":\"æ¸¸æˆç«æŠ€\",\"url\":\"/bookcity/get_filter_search_book_list\n?app_version={{source.getLoginHeaderMap()['app_version']}}&filter_word=&count=10&tags=%5B%7B%22filter%22%3A%221%22%2C%22tag%22%3A%22%22%7D%5D&use_daguan=0&device_token={{source.getLoginHeaderMap()['device_token']}}&is_paid=&login_token={{source.getLoginHeaderMap()['login_token']}}&page={{page-1}}&category_index=3&filter_uptime=&key=&account={{source.getLoginHeaderMap()['account']}}&up_status=&order=week_click\",\"style\": {\"layout_flexGrow\": 0.25,\"layout_flexBasisPercent\": -1}},\n{\"title\":\"ä»™ä¾ æ­¦ä¾ \",\"url\":\"/bookcity/get_filter_search_book_list\n?app_version={{source.getLoginHeaderMap()['app_version']}}&filter_word=&count=10&tags=%5B%7B%22filter%22%3A%221%22%2C%22tag%22%3A%22%22%7D%5D&use_daguan=0&device_token={{source.getLoginHeaderMap()['device_token']}}&is_paid=&login_token={{source.getLoginHeaderMap()['login_token']}}&page={{page-1}}&category_index=5&filter_uptime=&key=&account={{source.getLoginHeaderMap()['account']}}&up_status=&order=week_click\",\"style\": {\"layout_flexGrow\": 0.25,\"layout_flexBasisPercent\": -1}},\n{\"title\":\"å…è´¹åŒäºº\",\"url\":\"/bookcity/get_filter_search_book_list\n?app_version={{source.getLoginHeaderMap()['app_version']}}&filter_word=&count=10&tags=%5B%7B%22filter%22%3A%221%22%2C%22tag%22%3A%22%22%7D%5D&use_daguan=0&device_token={{source.getLoginHeaderMap()['device_token']}}&is_paid=&login_token={{source.getLoginHeaderMap()['login_token']}}&page={{page-1}}&category_index=24&filter_uptime=&key=&account={{source.getLoginHeaderMap()['account']}}&up_status=&order=week_click\",\"style\": {\"layout_flexGrow\": 0.25,\"layout_flexBasisPercent\": -1}},\n{\"title\":\"å¥³é¢‘å°è¯´\",\"url\":\"/bookcity/get_filter_search_book_list\n?app_version={{source.getLoginHeaderMap()['app_version']}}&filter_word=&count=10&tags=%5B%7B%22filter%22%3A%221%22%2C%22tag%22%3A%22%22%7D%5D&use_daguan=0&device_token={{source.getLoginHeaderMap()['device_token']}}&is_paid=&login_token={{source.getLoginHeaderMap()['login_token']}}&page={{page-1}}&category_index=11&filter_uptime=&key=&account={{source.getLoginHeaderMap()['account']}}&up_status=&order=week_click\",\"style\": {\"layout_flexGrow\": 0,\"layout_flexBasisPercent\": 0.29}},\n{\"title\": \"å°è¯´æ¦œå•\",\"url\": \"\",\"style\": {\"layout_flexGrow\": 0,\"layout_flexBasisPercent\": 1}},\n{\"title\":\"æ–°ä¹¦æœˆæ¦œ\",\"url\":\"/bookcity/get_rank_book_list?time_type=month&app_version={{source.getLoginHeaderMap()['app_version']}}&device_token={{source.getLoginHeaderMap()['device_token']}}&count=10&login_token={{source.getLoginHeaderMap()['login_token']}}&page={{page-1}}&account={{source.getLoginHeaderMap()['account']}}&order=yp_new\",\"style\": {\"layout_flexGrow\": 0.25,\"layout_flexBasisPercent\": -1}},\n{\"title\":\"æ–°ä¹¦æ€»æ¦œ\",\"url\":\"/bookcity/get_rank_book_list?time_type=total&app_version={{source.getLoginHeaderMap()['app_version']}}&device_token={{source.getLoginHeaderMap()['device_token']}}&count=10&login_token={{source.getLoginHeaderMap()['login_token']}}&page={{page-1}}&account={{source.getLoginHeaderMap()['account']}}&order=yp_new\",\"style\": {\"layout_flexGrow\": 0.25,\"layout_flexBasisPercent\": -1}},\n{\"title\":\"ç‚¹å‡»æ¦œ\",\"url\":\"\",\"style\": {\"layout_flexGrow\": 0,\"layout_flexBasisPercent\": 1}},\n{\"title\":\"æœˆæ¦œ\",\"url\":\"/bookcity/get_rank_book_list?time_type=month&app_version={{source.getLoginHeaderMap()['app_version']}}&device_token={{source.getLoginHeaderMap()['device_token']}}&count=10&login_token={{source.getLoginHeaderMap()['login_token']}}&page={{page-1}}&account={{source.getLoginHeaderMap()['account']}}&order=no_vip_click\",\"style\": {\"layout_flexGrow\": 0.25,\"layout_flexBasisPercent\": -1}},\n{\"title\":\"æ€»æ¦œ\",\"url\":\"/bookcity/get_rank_book_list?time_type=total&app_version={{source.getLoginHeaderMap()['app_version']}}&device_token={{source.getLoginHeaderMap()['device_token']}}&count=10&login_token={{source.getLoginHeaderMap()['login_token']}}&page={{page-1}}&account={{source.getLoginHeaderMap()['account']}}&order=no_vip_click\",\"style\": {\"layout_flexGrow\": 0.25,\"layout_flexBasisPercent\": -1}},\n{\"title\":\"æœˆç¥¨æ¦œ\",\"url\":\"\",\"style\": {\"layout_flexGrow\": 0,\"layout_flexBasisPercent\": 1}},\n{\"title\":\"æœˆæ¦œ\",\"url\":\"/bookcity/get_rank_book_list?time_type=month&app_version={{source.getLoginHeaderMap()['app_version']}}&device_token={{source.getLoginHeaderMap()['device_token']}}&count=10&login_token={{source.getLoginHeaderMap()['login_token']}}&page={{page-1}}&account={{source.getLoginHeaderMap()['account']}}&order=yp\",\"style\": {\"layout_flexGrow\": 0.25,\"layout_flexBasisPercent\": -1}},\n{\"title\":\"æ€»æ¦œ\",\"url\":\"/bookcity/get_rank_book_list?time_type=total&app_version={{source.getLoginHeaderMap()['app_version']}}&device_token={{source.getLoginHeaderMap()['device_token']}}&count=10&login_token={{source.getLoginHeaderMap()['login_token']}}&page={{page-1}}&account={{source.getLoginHeaderMap()['account']}}&order=yp\",\"style\": {\"layout_flexGrow\": 0.25,\"layout_flexBasisPercent\": -1}},\n{\"title\":\"æ”¶è—æ¦œ\",\"url\":\"\",\"style\": {\"layout_flexGrow\": 0,\"layout_flexBasisPercent\": 1}},\n{\"title\":\"å‘¨æ¦œ\",\"url\":\"/bookcity/get_rank_book_list?time_type=week&app_version={{source.getLoginHeaderMap()['app_version']}}&device_token={{source.getLoginHeaderMap()['device_token']}}&count=10&login_token={{source.getLoginHeaderMap()['login_token']}}&page={{page-1}}&account={{source.getLoginHeaderMap()['account']}}&order=favor\",\"style\": {\"layout_flexGrow\": 0.25,\"layout_flexBasisPercent\": -1}},\n{\"title\":\"æœˆæ¦œ\",\"url\":\"/bookcity/get_rank_book_list?time_type=month&app_version={{source.getLoginHeaderMap()['app_version']}}&device_token={{source.getLoginHeaderMap()['device_token']}}&count=10&login_token={{source.getLoginHeaderMap()['login_token']}}&page={{page-1}}&account={{source.getLoginHeaderMap()['account']}}&order=favor\",\"style\": {\"layout_flexGrow\": 0.25,\"layout_flexBasisPercent\": -1}},\n{\"title\":\"æ€»æ¦œ\",\"url\":\"/bookcity/get_rank_book_list?time_type=total&app_version={{source.getLoginHeaderMap()['app_version']}}&device_token={{source.getLoginHeaderMap()['device_token']}}&count=10&login_token={{source.getLoginHeaderMap()['login_token']}}&page={{page-1}}&account={{source.getLoginHeaderMap()['account']}}&order=favor\",\"style\": {\"layout_flexGrow\": 0.25,\"layout_flexBasisPercent\": -1}},\n{\"title\":\"ç•…é”€æ¦œ\",\"url\":\"\",\"style\": {\"layout_flexGrow\": 0,\"layout_flexBasisPercent\": 1}},\n{\"title\":\"å‘¨æ¦œ\",\"url\":\"/bookcity/get_rank_book_list?time_type=week&app_version={{source.getLoginHeaderMap()['app_version']}}&device_token={{source.getLoginHeaderMap()['device_token']}}&count=10&login_token={{source.getLoginHeaderMap()['login_token']}}&page={{page-1}}&account={{source.getLoginHeaderMap()['account']}}&order=fans_value\",\"style\": {\"layout_flexGrow\": 0.25,\"layout_flexBasisPercent\": -1}},\n{\"title\":\"æœˆæ¦œ\",\"url\":\"/bookcity/get_rank_book_list?time_type=month&app_version={{source.getLoginHeaderMap()['app_version']}}&device_token={{source.getLoginHeaderMap()['device_token']}}&count=10&login_token={{source.getLoginHeaderMap()['login_token']}}&page={{page-1}}&account={{source.getLoginHeaderMap()['account']}}&order=fans_value\",\"style\": {\"layout_flexGrow\": 0.25,\"layout_flexBasisPercent\": -1}},\n{\"title\":\"æ€»æ¦œ\",\"url\":\"/bookcity/get_rank_book_list?time_type=total&app_version={{source.getLoginHeaderMap()['app_version']}}&device_token={{source.getLoginHeaderMap()['device_token']}}&count=10&login_token={{source.getLoginHeaderMap()['login_token']}}&page={{page-1}}&account={{source.getLoginHeaderMap()['account']}}&order=fans_value\",\"style\": {\"layout_flexGrow\": 0.25,\"layout_flexBasisPercent\": -1}},\n{\"title\":\"æ¨èæ¦œ\",\"url\":\"\",\"style\": {\"layout_flexGrow\": 0,\"layout_flexBasisPercent\": 1}},\n{\"title\":\"å‘¨æ¦œ\",\"url\":\"/bookcity/get_rank_book_list?time_type=week&app_version={{source.getLoginHeaderMap()['app_version']}}&device_token={{source.getLoginHeaderMap()['device_token']}}&count=10&login_token={{source.getLoginHeaderMap()['login_token']}}&page={{page-1}}&account={{source.getLoginHeaderMap()['account']}}&order=recommend\",\"style\": {\"layout_flexGrow\": 0.25,\"layout_flexBasisPercent\": -1}},\n{\"title\":\"æœˆæ¦œ\",\"url\":\"/bookcity/get_rank_book_list?time_type=month&app_version={{source.getLoginHeaderMap()['app_version']}}&device_token={{source.getLoginHeaderMap()['device_token']}}&count=10&login_token={{source.getLoginHeaderMap()['login_token']}}&page={{page-1}}&account={{source.getLoginHeaderMap()['account']}}&order=recommend\",\"style\": {\"layout_flexGrow\": 0.25,\"layout_flexBasisPercent\": -1}},\n{\"title\":\"æ€»æ¦œ\",\"url\":\"/bookcity/get_rank_book_list?time_type=total&app_version={{source.getLoginHeaderMap()['app_version']}}&device_token={{source.getLoginHeaderMap()['device_token']}}&count=10&login_token={{source.getLoginHeaderMap()['login_token']}}&page={{page-1}}&account={{source.getLoginHeaderMap()['account']}}&order=recommend\",\"style\": {\"layout_flexGrow\": 0.25,\"layout_flexBasisPercent\": -1}},\n{\"title\":\"åˆ€ç‰‡æ¦œ\",\"url\":\"\",\"style\": {\"layout_flexGrow\": 0,\"layout_flexBasisPercent\": 1}},\n{\"title\":\"æœˆæ¦œ\",\"url\":\"/bookcity/get_rank_book_list?time_type=week&app_version={{source.getLoginHeaderMap()['app_version']}}&device_token={{source.getLoginHeaderMap()['device_token']}}&count=10&login_token={{source.getLoginHeaderMap()['login_token']}}&page={{page-1}}&account={{source.getLoginHeaderMap()['account']}}&order=blade\",\"style\": {\"layout_flexGrow\": 0.25,\"layout_flexBasisPercent\": -1}},\n{\"title\":\"æ€»æ¦œ\",\"url\":\"/bookcity/get_rank_book_list?time_type=total&app_version={{source.getLoginHeaderMap()['app_version']}}&device_token={{source.getLoginHeaderMap()['device_token']}}&count=10&login_token={{source.getLoginHeaderMap()['login_token']}}&page={{page-1}}&account={{source.getLoginHeaderMap()['account']}}&order=blade\",\"style\": {\"layout_flexGrow\": 0.25,\"layout_flexBasisPercent\": -1}},\n{\"title\":\"æ›´æ–°æ¦œ\",\"url\":\"\",\"style\": {\"layout_flexGrow\": 0,\"layout_flexBasisPercent\": 1}},\n{\"title\":\"å‘¨æ¦œ\",\"url\":\"/bookcity/get_rank_book_list?time_type=week&app_version={{source.getLoginHeaderMap()['app_version']}}&device_token={{source.getLoginHeaderMap()['device_token']}}&count=10&login_token={{source.getLoginHeaderMap()['login_token']}}&page={{page-1}}&account={{source.getLoginHeaderMap()['account']}}&order=word_count\",\"style\": {\"layout_flexGrow\": 0.25,\"layout_flexBasisPercent\": -1}},\n{\"title\":\"æœˆæ¦œ\",\"url\":\"/bookcity/get_rank_book_list?time_type=month&app_version={{source.getLoginHeaderMap()['app_version']}}&device_token={{source.getLoginHeaderMap()['device_token']}}&count=10&login_token={{source.getLoginHeaderMap()['login_token']}}&page={{page-1}}&account={{source.getLoginHeaderMap()['account']}}&order=word_count\",\"style\": {\"layout_flexGrow\": 0.25,\"layout_flexBasisPercent\": -1}},\n{\"title\":\"æ€»æ¦œ\",\"url\":\"/bookcity/get_rank_book_list?time_type=total&app_version={{source.getLoginHeaderMap()['app_version']}}&device_token={{source.getLoginHeaderMap()['device_token']}}&count=10&login_token={{source.getLoginHeaderMap()['login_token']}}&page={{page-1}}&account={{source.getLoginHeaderMap()['account']}}&order=word_count\",\"style\": {\"layout_flexGrow\": 0.25,\"layout_flexBasisPercent\": -1}},\n{\"title\":\"åæ§½æ¦œ\",\"url\":\"\",\"style\": {\"layout_flexGrow\": 0,\"layout_flexBasisPercent\": 1}},\n{\"title\":\"å‘¨æ¦œ\",\"url\":\"/bookcity/get_rank_book_list?time_type=week&app_version={{source.getLoginHeaderMap()['app_version']}}&device_token={{source.getLoginHeaderMap()['device_token']}}&count=10&login_token={{source.getLoginHeaderMap()['login_token']}}&page={{page-1}}&account={{source.getLoginHeaderMap()['account']}}&order=tsukkomi\",\"style\": {\"layout_flexGrow\": 0.25,\"layout_flexBasisPercent\": -1}},\n{\"title\":\"æœˆæ¦œ\",\"url\":\"/bookcity/get_rank_book_list?time_type=month&app_version={{source.getLoginHeaderMap()['app_version']}}&device_token={{source.getLoginHeaderMap()['device_token']}}&count=10&login_token={{source.getLoginHeaderMap()['login_token']}}&page={{page-1}}&account={{source.getLoginHeaderMap()['account']}}&order=tsukkomi\",\"style\": {\"layout_flexGrow\": 0.25,\"layout_flexBasisPercent\": -1}},\n{\"title\":\"æ€»æ¦œ\",\"url\":\"/bookcity/get_rank_book_list?time_type=total&app_version={{source.getLoginHeaderMap()['app_version']}}&device_token={{source.getLoginHeaderMap()['device_token']}}&count=10&login_token={{source.getLoginHeaderMap()['login_token']}}&page={{page-1}}&account={{source.getLoginHeaderMap()['account']}}&order=tsukkomi\",\"style\": {\"layout_flexGrow\": 0,\"layout_flexBasisPercent\": 0.29}}\n]",
        "enabled": true,
        "enabledExplore": true,
        "weight": 0,
        "customOrder": 3,
        "lastUpdateTime": 1661872554690,
        "ruleSearch": {
            "bookList": "<js>\n// è§£å¯†\nlet key = java.base64DecodeToByteArray(\"lXsAUe1NZEw6tAxM9w1Tpq2tU4la2+PwM8evj2C+yB0=\")\nlet iv = java.base64DecodeToByteArray(\"AAAAAAAAAAAAAAAAAAAAAA==\")\nlet aes = Packages.cn.hutool.crypto.symmetric.AES(\"CBC\",\"PKCS5Padding\", key, iv)\nresult = aes.decryptStr(result)\nlet tip = JSON.parse(result).tip\nif(tip) {\n   java.toast(tip)\n   throw new Error(tip)\n}\n</js>\n$.data.book_list[*]",
            "name": "$.book_name",
            "author": "$.author_name",
            "kind": "$.tag&&$.book_src",
            "wordCount": "$.total_word_count",
            "lastChapter": "<js>\nlet title = java.getString(\"last_chapter_info.chapter_title\")\nlet time = java.getString(\"last_chapter_info.uptime\")\nif(!/ç¬¬.*ç« /.test(title)){\n  title = `ç¬¬${java.getString(\"last_chapter_info.chapter_index\")}ç«  ` + title\n}\n`${title} â€¢ ${time}`\n</js>",
            "intro": "$.description",
            "coverUrl": "$.cover",
            "bookUrl": "/book/get_info_by_id?app_version={{source.getLoginHeaderMap()['app_version']}}&book_id={{$.book_id}}&use_daguan=1&device_token={{source.getLoginHeaderMap()['device_token']}}&login_token={{source.getLoginHeaderMap()['login_token']}}&account={{source.getLoginHeaderMap()['account']}}"
        },
        "ruleExplore": {
            "bookList": "<js>\nvar headerMap = source.getLoginHeaderMap()\n// å‚æ•°\nlet app_version = headerMap['app_version']\nlet account = headerMap['account']\nlet login_token = headerMap['login_token']\nlet device_token = headerMap['device_token']\nlet rest_hlb = headerMap['rest_hlb']\nlet params = `app_version=${app_version}&device_token=${device_token}&login_token=${login_token}&account=${account}`\nlet key = java.base64DecodeToByteArray(\"lXsAUe1NZEw6tAxM9w1Tpq2tU4la2+PwM8evj2C+yB0=\")\nlet iv = java.base64DecodeToByteArray(\"AAAAAAAAAAAAAAAAAAAAAA==\")\nlet aes = Packages.cn.hutool.crypto.symmetric.AES(\"CBC\",\"PKCS5Padding\", key, iv)\n// è·å–æ•°æ®\nresult = aes.decryptStr(result)\nlet res = JSON.parse(result)\n// ç­¾åˆ°\nif(/get_task_bonus_with_sign_recommend.*/.test(baseUrl)){\n  let hlb = res.tip ? 0 : Number(res.data.bonus.hlb)\n  // è·å–ä¹¦å¸\n  let walletUrl = `https://app.happybooker.cn/reader/get_wallet_info?${params}`\n  let walletRes = JSON.parse(aes.decryptStr(java.ajax(walletUrl)))\n  rest_hlb = walletRes.tip ? rest_hlb : Number(walletRes.data.wallet_info.rest_hlb) + hlb\n  let message = res.tip ? `${res.tip},å½“å‰å‰©ä½™${rest_hlb}æ¬¢ä¹å¸`:`ç­¾åˆ°æˆåŠŸ,è·å¾—${hlb}æ¬¢ä¹å¸,å½“å‰å‰©ä½™${rest_hlb}æ¬¢ä¹å¸`\n  source.putLoginHeader(Object.assign(headerMap,{'rest_hlb': String(rest_hlb)}))\n  java.toast(message)\n  result={}\n} else if(res.tip) { \n   java.toast(res.tip)\n   throw new Error(res.tip)\n   result={}\n}\n</js>\n$.data.book_list[*]||$.data.daily_task_list[*]",
            "name": "$.book_name||$.book_info.book_name||$.name",
            "author": "$.author_name||$.book_info.author_name",
            "kind": "{{$.tag}}\n{{java.getString('total_count')!='' ? `æ€»æ¬¡æ•°ï¼š${java.getString('total_count')}/å®Œæˆæ¬¡æ•°ï¼š${java.getString('complete_count')}` : ''}}\n{{java.getString(\"is_finished\") == 1 ? 'å®Œæˆ': 'æœªå®Œæˆ'}}",
            "wordCount": "$.total_word_count||$.book_info.total_word_count",
            "lastChapter": "<js>\nlet title = java.getString(\"last_chapter_info.chapter_title\")\nlet time = java.getString(\"last_chapter_info.uptime\")\nlet index = java.getString(\"last_chapter_info.chapter_index\")\nif(!/ç¬¬.*ç« /.test(title)){\n  title = `ç¬¬${index}ç«  ${title}`\n}\n!/[bookshelf|get_all_task_list].*/.test(baseUrl) ? `${title} â€¢ ${time}` : ''\n</js>",
            "intro": "$.description||$.bonus",
            "coverUrl": "$.cover||$.book_info.cover ",
            "bookUrl": "/book/get_info_by_id?app_version={{source.getLoginHeaderMap()['app_version']}}&book_id={{$.book_id||$.book_info.book_id}}&use_daguan=1&device_token={{source.getLoginHeaderMap()['device_token']}}&login_token={{source.getLoginHeaderMap()['login_token']}}&account={{source.getLoginHeaderMap()['account']}}"
        },
        "ruleBookInfo": {
            "init": "<js>\nif(!/book_id=.*/.test(baseUrl)) throw new Error(\"ç¼ºå°‘å‚æ•°\")\nlet key = java.base64DecodeToByteArray(\"lXsAUe1NZEw6tAxM9w1Tpq2tU4la2+PwM8evj2C+yB0=\")\nlet iv = java.base64DecodeToByteArray(\"AAAAAAAAAAAAAAAAAAAAAA==\")\nlet aes = Packages.cn.hutool.crypto.symmetric.AES(\"CBC\",\"PKCS5Padding\", key, iv)\nresult = aes.decryptStr(result)\nlet tip = JSON.parse(result).tip\nif(tip) {\n   java.toast(tip)\n   throw new Error(tip)\n}\n</js>\n$.data.book_info",
            "name": "$.book_name",
            "author": "$.author_name",
            "kind": "$.tag",
            "wordCount": "$.total_word_count",
            "lastChapter": "<js>\nlet title = java.getString(\"last_chapter_info.chapter_title\")\nlet time = java.getString(\"last_chapter_info.uptime\")\nif(!/[ç¬¬.*ç« |\\d+\\.]/.test(title)){\n  title = `ç¬¬${java.getString(\"last_chapter_info.chapter_index\")}ç«  ${title}`\n}\n`${title} â€¢ ${time}`\n</js>",
            "intro": "$.description",
            "coverUrl": "$.cover",
            "tocUrl": "/chapter/get_updated_chapter_by_division_new?division_id=0&account={{source.getLoginHeaderMap()['account']}}&device_token={{source.getLoginHeaderMap()['device_token']}}&app_version={{source.getLoginHeaderMap()['app_version']}}&login_token={{source.getLoginHeaderMap()['login_token']}}&book_id={{$.book_id}}"
        },
        "ruleToc": {
            "chapterList": "<js>\n// è§£å¯†\nlet key = java.base64DecodeToByteArray(\"lXsAUe1NZEw6tAxM9w1Tpq2tU4la2+PwM8evj2C+yB0=\")\nlet iv = java.base64DecodeToByteArray(\"AAAAAAAAAAAAAAAAAAAAAA==\")\nlet aes = Packages.cn.hutool.crypto.symmetric.AES(\"CBC\",\"PKCS5Padding\", key, iv)\nlet app_version = source.getLoginHeaderMap()['app_version']\nlet account = source.getLoginHeaderMap()['account']\nlet login_token = source.getLoginHeaderMap()['login_token']\nlet device_token = source.getLoginHeaderMap()['device_token']\n// ç« èŠ‚åˆ—è¡¨\nlet res = JSON.parse(aes.decryptStr(result))\nif(res.tip) { \n   java.toast(res.tip)\n   throw new Error(res.tip)\n}\nlet chList = []\nres.data.chapter_list.forEach(volList => {\n chList.push({title: volList.division_name,voltype: true})\n volList.chapter_list.forEach(item=>{\n   chList.push({\n    cid: item.chapter_id,\n    title: item.chapter_title,\n    isVip: item.is_paid&&item.auth_access==0,\n    isPay: item.auth_access,\n    url: `https://sk.hbooker.com/chapter/get_chapter_command?app_version=${app_version}&chapter_id=${item.chapter_id}&login_token=${login_token}&account=${account}&device_token=${device_token}`,\n    info: `æ›´æ–°æ—¶é—´ ${item.mtime} å­—æ•° ${item.word_count}`\n   })\n })\n})\nchList\n</js>",
            "chapterName": "title",
            "chapterUrl": "url",
            "isVolume": "voltype",
            "isVip": "isVip",
            "isPay": "isPay",
            "updateTime": "info"
        },
        "ruleContent": {
            "content": "<js>\n// è§£å¯†\nfunction decrypt(str1, str2){\n  let key = java.base64DecodeToByteArray(java.digestBase64Str(str2,\"sha256\"))\n  let iv = java.base64DecodeToByteArray(\"AAAAAAAAAAAAAAAAAAAAAA==\")\n  let aes = Packages.cn.hutool.crypto.symmetric.AES(\"CBC\",\"PKCS5Padding\", key, iv)\n  return aes.decryptStr(str1)\n}\nlet headerMap = source.getLoginHeaderMap()\n// è·å–å¯†é’¥\nlet app_version = headerMap['app_version']\nlet device_token = headerMap['device_token']\nlet account = headerMap['account']\nlet login_token = headerMap['login_token']\nlet rest_hlb = headerMap['rest_hlb']\nlet key = \"zG2nSeEfSHfvTCHy5LCcqtBbQehKNLXn\"\nlet cid = baseUrl.match(/chapter_id=(\\d+)/)[1]\nlet result = JSON.parse(decrypt(result,key))\nlet tip = result.tip\nif(tip){\n java.toast(tip)\n throw new Error(tip)\t\n}\nlet cmd = result.data.command\n// æ­£æ–‡å†…å®¹\nlet body = java.ajax(`https://sk.hbooker.com/chapter/get_cpt_ifm?chapter_command=${cmd}&app_version=${app_version}&chapter_id=${cid}&login_token=${login_token}&account=${account}&device_token=${device_token}`)\nlet chInfo = JSON.parse(decrypt(body,key)).data.chapter_info\nlet unit_hlb = java.put('unit_hlb', chInfo.unit_hlb)\nlet content = decrypt(chInfo.txt_content,cmd)\nlet isPay = chInfo.is_paid && chInfo.auth_access == 0\nlet payText = `\\næœ¬ç« æ˜¯VIPç« èŠ‚ï¼Œè´­ä¹°åæ‰èƒ½é˜…è¯»\\næœ¬ç« éœ€è¦${unit_hlb}å¸, æ‚¨æœ‰${rest_hlb}å¸,è¯·ç‚¹å‡»å³ä¸Šè§’çš„è´­ä¹°æŒ‰é’®è´­ä¹°æœ¬ç« (è¯·å‹¿ä¹±ç‚¹)ï¼Œè´­ä¹°åè‡ªåŠ¨åŠ å…¥åˆ°ä¸ªäººä¹¦æ¶ï¼`\nisPay ? content + payText : content \n</js>",
            "replaceRegex": "##<img[^>]*src=\"([^\"]*(?:\"[^>]+\\})?)\"[^>]*>",
            "payAction": "// è§£å¯†\nlet key = java.base64DecodeToByteArray(\"lXsAUe1NZEw6tAxM9w1Tpq2tU4la2+PwM8evj2C+yB0=\")\nlet iv = java.base64DecodeToByteArray(\"AAAAAAAAAAAAAAAAAAAAAA==\")\nlet aes = Packages.cn.hutool.crypto.symmetric.AES(\"CBC\",\"PKCS5Padding\", key, iv)\n// å‚æ•°\nlet headerMap = source.getLoginHeaderMap()\nlet app_version = headerMap['app_version']\nlet account = headerMap['account']\nlet login_token = headerMap['login_token']\nlet device_token = headerMap['device_token']\nlet shelf_id = headerMap['shelf_id']\nlet chapter_id = chapter.url.match(/chapter_id=(\\d+)/)[1]\nlet params = `app_version=${app_version}&device_token=${device_token}&login_token=${login_token}&account=${account}`\n// å¼€å§‹è´­ä¹°\nlet payUrl = `https://sk.hbooker.com/chapter/buy?${params}&shelf_id=${shelf_id}&chapter_id=${chapter_id}`\nlet payRes = JSON.parse(aes.decryptStr(java.ajax(payUrl)))\nif(payRes.tip){\n java.toast(payRes.tip)\n throw new Error(payRes.tip)\t\n}\n// æ›´æ–°ä¹¦å¸\nlet propUrl = `https://sk.hbooker.com/reader/get_prop_info?${params}`\nlet propRes = JSON.parse(aes.decryptStr(java.ajax(propUrl)))\nif(propRes.tip){\n java.toast(propRes.tip)\n throw new Error(propRes.tip)\t\n}\nlet rest_hlb = propRes.data.prop_info.rest_hlb\njava.toast(`è´­ä¹°æˆåŠŸ,å‰©ä½™ä¹¦å¸${rest_hlb},è¯·æ‰‹åŠ¨åˆ·æ–°æ­£æ–‡`)\nsource.putLoginHeader(Object.assign(headerMap,{'rest_hlb': String(rest_hlb)}))"
        }
    }
]